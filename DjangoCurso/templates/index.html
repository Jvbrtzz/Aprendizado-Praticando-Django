{% extends 'base.html' %}
{% block content %}
    {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    {% endfor %}
    <main>
        <div class="mb-4">
            <p class="lead text-center fs-2">REPOSITÓRIOS PÚBLICOS</p>
            <form method="get" class="row g-2 align-items-center mb-3 justify-content-center">
                <div class="col-12 col-md-6">
                    <input type="text" class="form-control form-control-lg" name="filtro" placeholder="Filtrar por nome" value="{{ filtro }}">
                </div>
                <div class="col-auto">
                    <button type="submit" class="btn btn-primary btn-lg">Filtrar</button>
                </div>
            </form>
            <a href="{% url 'segunda_pagina' %}" class="btn btn-secondary mb-3">Go to Second Page</a>
            {% if not user.is_authenticated %}
            <a href="http://localhost:8000/accounts/github/login/?process=login" class="btn btn-warning mb-3">Login com Github</a>
            {% endif %}
        </div>
        <ul class="list-group">
            {% if user.is_authenticated %}
                {% for repositorio in repositorios %}
                    <li class="list-group-item">
                        <strong>ID do Repositório:</strong> {{ repositorio.id }}<br>
                        <strong>Criador:</strong> {{ repositorio.usuario }}<br>
                        <strong>Nome:</strong> {{ repositorio.nome }}<br>
                        <strong>Descrição:</strong> {{ repositorio.descricao }}<br>
                        <strong>Linguagem:</strong> {{ repositorio.linguagem }}<br>
                        <strong>Visibilidade:</strong>
                        {% if repositorio.visibilidade == 'PU' %}
                            Privado
                        {% elif repositorio.visibilidade == 'PR' %}
                            Público
                        {% else %}
                            {{ repositorio.visibilidade }}
                        {% endif %}
                    </li>
                {% empty %}
                    <li class="list-group-item text-muted">Nenhum repositório cadastrado.</li>
                {% endfor %}
            {% else %}
                <li class="list-group-item text-muted">Faça login para ver os repositórios.</li>
            {% endif %}
        </ul>
    </main>
    <footer class="mt-4 text-center text-muted">
        &copy; 2025 My Website
    </footer>
{% endblock %}